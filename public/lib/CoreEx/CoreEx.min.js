var CoreEX=function(e){"use strict";function t(e,t){return null!=e?e:t}function n(e){return null!=e}function o(e){let t;this.name="DeveloperError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}function r(){this.dirctionary={}}t.EMPTY_OBJECT=Object.freeze({}),n(Object.create)&&(o.prototype=Object.create(Error.prototype),o.prototype.constructor=o),o.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return n(this.stack)&&(e+=`\n${this.stack.toString()}`),e},o.throwInstantiationError=function(){throw new o("This function defines an interface and should not be called directly.")},r.prototype.add=function(e,t){this.dirctionary[e]=t},r.prototype.remove=function(e){return!!this.dirctionary.hasOwnProperty(e)&&(delete this.dirctionary[e],!0)},r.prototype.contain=function(e){return!!this.dirctionary.hasOwnProperty(e)},r.prototype.removeAll=function(e){this.dirctionary={}},Object.defineProperties(r.prototype,{length:{get:function(){return Object.getOwnPropertyNames(this.dirctionary).length}}}),r.prototype.forEach=function(e){for(var t in this.dirctionary)e(t,this.dirctionary[t])},r.prototype.get=function(e){return this.dirctionary.hasOwnProperty(e)?this.dirctionary[e]:void 0},r.prototype.toString=function(){for(const e in this.dirctionary)console.log(this.dirctionary[e])},r.prototype.toArray=function(){return Object.keys(this.dirctionary).map((e=>this.dirctionary[e]))};const i=/((?:.*\/)|^)SceneGISEX(\.min)?\.js(?:\?|\#|$)/;let a;var s=new r;function l(e,t){var n=e;if(0==t)return n;if(t){let e=t.split(".");for(let t=0;t<e.length;t++)n=n[e[t]];return n}return e.body&&e.body.length?n=e.body:e.result&&e.result.length?n=e.result:e.data&&e.data.length?n=e.data:e.source&&(e.source.length?n=e.source:e.source.data&&e.source.data.length&&(n=e.source.data)),n}function c(e,t={}){var n={},o=JSON.stringify(t);n=JSON.parse(o);var r=t.method;for(let e in t.body)r=r+e+"="+t.body[e]+"&";if("get"==t.method&&t.body){e+="?";for(let n in t.body)e=e+n+"="+t.body[n]+"&";e=e.slice(0,e.length-1),n={method:"get"}}if("post"==n.method)switch(t.contentType){case"multipart/form-data":let e=new FormData;for(var i in n.body)e.append(i,n.body[i]);n.body=e;break;case"application/json":break;case"application/x-www-form-urlencoded":let o="";for(let e in t.body)o=o+e+"="+t.body[e]+"&";o=o.slice(0,o.length-1),n.body=o}r+=e;var a=new Date,c=s.get(r);if(c){if(a.getTime()-c.time.getTime()<5e3)return c.data;s.remove(r)}var d=t.isAuth,u=new Promise(((t,o)=>{d&&window.$axios?window.$axios({url:e,...n}).then((e=>{var o=l(e,n.resFormat);t(o)})):fetch(e,n).then((e=>e.json())).then((e=>{var o=l(e,n.resFormat);t(o)})).catch((e=>{t([]),console.log("Error:",e)}))})),h={time:a,data:u};return s.add(r,h),u}String.prototype.format=function(e){var t=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof e){for(var n in e)if(null!=e[n]){var o=new RegExp("({"+n+"})","g");if(e[n]instanceof Object){o=new RegExp('("{'+n+'}")',"g");var r=JSON.stringify(e[n]);t=t.replace(o,r)}else t=t.replace(o,e[n])}}else for(var i=0;i<arguments.length;i++)if(null!=arguments[i]){o=new RegExp("({)"+i+"(})","g");if(arguments[i]instanceof Object){o=new RegExp('("{'+n+'}")',"g");r=JSON.stringify(arguments[i]);t=t.replace(o,r)}else t=t.replace(o,arguments[i])}return t};const d={};function u(e,t){for(var n=e.length/3,o=0,r=0,i=0,a=function(e,t){for(var n=1,o=1;t>0;)n*=e,o*=t,e--,t--;return n/o},s=0;s<n;s++)o+=e[0+3*s]*Math.pow(1-t,n-1-s)*Math.pow(t,s)*a(n-1,s),r+=e[1+3*s]*Math.pow(1-t,n-1-s)*Math.pow(t,s)*a(n-1,s),i+=e[2+3*s]*Math.pow(1-t,n-1-s)*Math.pow(t,s)*a(n-1,s);return[o,r,i]}d.createUID=function(){return"xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},d.CreateBezierPoints=function(e,t){for(var n=[],o=0;o<t;o++){var r=u(e,o/t);n.push(r[0],r[1],r[2])}return n},d.convertJBToJW=function(e,t,n,o){var r=new SceneGIS.Cartesian3.fromDegrees(o.lon,o.lat,o.alt),i=SceneGIS.Transforms.eastNorthUpToFixedFrame(r),a=SceneGIS.Matrix4.fromRotationTranslation(SceneGIS.Matrix3.fromRotationZ(SceneGIS.Math.toRadians(o.angle)));SceneGIS.Matrix4.multiply(i,a,i);var s=new SceneGIS.Cartesian3,l=new SceneGIS.Cartesian3(e,t,n);SceneGIS.Matrix4.multiplyByPoint(i,l,s);var c=SceneGIS.Cartographic.fromCartesian(s);return{lon:SceneGIS.Math.toDegrees(c.longitude),lat:SceneGIS.Math.toDegrees(c.latitude),alt:c.height}},d.convertCarToJB=function(e,t,n,o){var r=new SceneGIS.Cartesian3.fromDegrees(o.lon,o.lat,o.alt),i=SceneGIS.Transforms.eastNorthUpToFixedFrame(r),a=SceneGIS.Matrix4.fromRotationTranslation(SceneGIS.Matrix3.fromRotationZ(SceneGIS.Math.toRadians(o.angle)));SceneGIS.Matrix4.multiply(i,a,i),SceneGIS.Matrix4.inverse(i,i);var s=new SceneGIS.Cartesian3,l=new SceneGIS.Cartesian3(e,t,n);return SceneGIS.Matrix4.multiplyByPoint(i,l,s),s},d.convertJWToJB=function(e,t,n,o){var r=new SceneGIS.Cartesian3.fromDegrees(o.lon,o.lat,o.alt),i=SceneGIS.Transforms.eastNorthUpToFixedFrame(r),a=SceneGIS.Matrix4.fromRotationTranslation(SceneGIS.Matrix3.fromRotationZ(SceneGIS.Math.toRadians(o.angle)));SceneGIS.Matrix4.multiply(i,a,i),SceneGIS.Matrix4.inverse(i,i);var s=new SceneGIS.Cartesian3,l=new SceneGIS.Cartesian3.fromDegrees(e,t,n);return SceneGIS.Matrix4.multiplyByPoint(i,l,s),s},d.wktToArray=function(e,t=0){if(e.indexOf("POINT")>-1){for(var n=e.replace(/POINT/g,"").replace(/\(/g,"").replace(/\)/g,"").split(","),o=[],r=0;r<n.length;r++){var i=n[r].split(" "),a=[];for(var s of i)""!=s&&a.push(s);o.push(parseFloat(a[0])),o.push(parseFloat(a[1]));var l=t;o.push(l||0)}return o}if(e.indexOf("LINESTRING")>-1){for(n=e.replace(/LINESTRING/g,"").replace(/\(/g,"").replace(/\)/g,"").split(","),o=[],r=0;r<n.length;r++){i=n[r].split(" "),a=[];for(var s of i)""!=s&&a.push(s);l=t;o.push(parseFloat(a[0])),o.push(parseFloat(a[1])),o.push(l?parseFloat(l):0)}return o}if(e.indexOf("POLYGON Z")>-1){for(n=e.replace(/POLYGON Z/g,"").replace(/\(/g,"").replace(/\)/g,"").split(","),o=[],r=0;r<n.length;r++){i=n[r].split(" "),a=[];for(var s of i)""!=s&&a.push(s);o.push(parseFloat(a[0])),o.push(parseFloat(a[1])),o.push(parseFloat(a[2]))}return o}if(e.indexOf("POLYGON")>-1){for(n=e.replace(/POLYGON/g,"").replace(/\(/g,"").replace(/\)/g,"").split(","),o=[],r=0;r<n.length;r++){i=n[r].split(" "),a=[];for(var s of i)""!=s&&a.push(s);l=t;o.push(parseFloat(a[0])),o.push(parseFloat(a[1])),o.push(l?parseFloat(l):20)}return o}return[]};let h=["id","positions","defaultAlt","geoType","nearDistance","farDistance","wkts","rule"];var p={point:"point",polyline:"polyline",polygon:"polygon"};function f(e,t,n,o){if(n=SceneGIS.defaultValue(n,0),t==p.point){if(0==e.length)return o.geo_point?o.geo_point:[];if(1!=e.length){if(3==e.length){var r=isNaN(Number(e[0]))?o[e[0]]:parseFloat(e[0]),i=isNaN(Number(e[1]))?o[e[1]]:parseFloat(e[1]);n=null!=n[0]?n[0]:n;var a=isNaN(Number(e[2]))?o[e[2]]?o[e[2]]:n||0:parseFloat(e[2]);return[parseFloat(r),parseFloat(i),parseFloat(a)]}var s=[];n=null!=n[0]?n[0]:n;for(var l=0;l<e.length;l++){var c=isNaN(Number(e[l]))?o[e[l]]?o[e[l]]:n||0:parseFloat(e[l]);s.push(parseFloat(c))}return s}if((h=o[e[0]])instanceof Array)return[h[0],h[1],h[2]];if(h.indexOf("POINT")>-1)return d.wktToArray(h,n)}else if(t==p.polyline||"polyLine"==t){if(0==e.length)return o.geo_polyLine?o.geo_polyLine:[];if(1==e.length)return(h=o[e[0]])instanceof Array?h:h.indexOf("LINESTRING")>-1?d.wktToArray(h,n):h;if(3!=e.length){s=[];var u=0;for(l=0;l<e.length;l++){a=0;l%3==0&&(a=null!=n[u]?n[u]:null!=n[0]?n[0]:n,u++);c=isNaN(Number(e[l]))?o[e[l]]?o[e[l]]:a||0:parseFloat(e[l]);s.push(parseFloat(c))}return s}}else if(t==p.polygon){if(0==e.length)return o.geo_polygon?o.geo_polygon:[];var h;if(1==e.length)return(h=o[e[0]])instanceof Array?h:h.indexOf("POLYGON Z")>-1||h.indexOf("POLYGON")>-1?d.wktToArray(h,n):h;if(3!=e.length){for(s=[],u=0,l=0;l<e.length;l++){a=0;l%3==0&&(a=null!=n[u]?n[u]:null!=n[0]?n[0]:n,u++);c=isNaN(Number(e[l]))?o[e[l]]?o[e[l]]:a||0:parseFloat(e[l]);s.push(parseFloat(c))}return s}}}function m(e){!function(e){let t=["polygon","polyline","label","billboard","ellipse","corridor","wall"],n=e.symbol,o=n.rule,r=n.templete,i=e.symbol;if(SceneGIS.defined(o)&&""!=o){if(""!=o&&r){let e=["geojson","czml","custom","echarts"];for(let n in r){let o=r[n],i=!1,s=!1;if(e.forEach((e=>{o[e]&&(s=!0)})),!s){for(var a in o)t.indexOf(a)>-1&&(i=!0);if(i){let e=o;r[n]={},r[n].czml=e}else{let e=o;r[n]={},r[n].custom=e}}}}}else if(n.templete)if(i.templete.temp1){let e=!1;for(let n of t)i.templete.temp1[n]&&(e=!0);e?i.czml=i.templete.temp1:i.custom=i.templete.temp1}else{let e=!1;for(let n of t)i.templete[n]&&(e=!0);e?i.czml=i.templete:i.custom=i.templete}}(e);let t=e.symbol;return t.geo_point?t.geoType=SceneGIS.defaultValue(t.geoType,"Point"):t.geo_polyLine?t.geoType=SceneGIS.defaultValue(t.geoType,"polyLine"):t.geo_polygon&&(t.geoType=SceneGIS.defaultValue(t.geoType,"Polygon")),SceneGIS.defined(t.czml)?"czml":SceneGIS.defined(t.custom)?"custom":SceneGIS.defined(t.geojson)?"geojson":SceneGIS.defined(t.mapEcharts)?(t.geojson=t.mapEcharts,delete t.mapEcharts,"geojson"):SceneGIS.defined(t.echarts)?"echarts":void 0}class y{constructor(){this.scenes={}}load(e){}static dataCheck(e){return function(e){let t="";if(e instanceof Array){if(0==e.length)return;if(e[0]instanceof Array){if(!(e[1]instanceof Array))throw new CoreEX.DeveloperError(`图层${option.id}的 数据源二 is not Array`);t="array2"}else t="document"==e[0].id?"czml":"array"}else t=!SceneGIS.defined(e.type)||"FeatureCollection"==e.type&&"Feature"==e.type?SceneGIS.defined(e.series)?"echarts":"object":"geojson";return t}(e)}static dataResolve(e){return function(e){let t=e.data;if(t instanceof Array){if(t.length>-1)return new Promise(((e,n)=>{e(t)}))}else{if(t.hasOwnProperty("url"))return new Promise(((e,n)=>{c(t.url,t.parm).then((t=>{e(t)}))})).then((e=>e));if(!t.hasOwnProperty("relation"))return new Promise(((e,n)=>{e(t)}));if(t.parm.length>=2){var n=c(t.parm[0].url,t.parm[0].parm?t.parm[0].parm:{}),r=c(t.parm[1].url,t.parm[1].parm?t.parm[1].parm:{});return Promise.all([n,r]).then((e=>{if(!(e[0]instanceof Array))throw new o("在有relation时，请求结果必须是数组");if(!(e[1]instanceof Array))throw new o("在有relation时，请求结果必须是数组");return e}))}}}(e)}static dataPrepare(e,t,n){return function(e,t,n){let o=n.data;if(e){var r=e.find((e=>e[o.relation[1]]===t[o.relation[0]]));if(!r)return!1;t=Object.assign(t,r)}return!0}(e,t,n)}static symbolCheck(e){return m(e)}static symbolResolve(e,t={}){return function(e,t={}){let n=t.id,r=t.symbol;if(!r||""==r)return{};SceneGIS.Check.typeOf.object("node",e);var i=r.rule,a={},s=void 0;let l=r.templete,c=!1;if(r.geo_point){var u=f(r.geo_point,"point",r.defaultAlt,e);e.geo_point=u,e.geo_lon=e.geo_point[0],e.geo_lat=e.geo_point[1],e.geo_alt=e.geo_point[2],c=!0}r.geo_polyLine&&(u=f(r.geo_polyLine,"polyLine",r.defaultAlt,e),e.geo_polyLine=u,c=!0);r.geo_polygon&&(u=f(r.geo_polygon,"polygon",r.defaultAlt,e),e.geo_polygon=u,c=!0);if(SceneGIS.defined(i)&&""!=i){if(""!=i&&l){for(var p in r)"templete"!=p&&(a[p]=r[p]);var m=new Function("node",i)(e);if(!SceneGIS.defined(m))throw new o(`图层${n}的symbol的rule解析出错,返回为空`);if(l[m])for(var p in l[m])-1==h.indexOf(p)&&(a[p]=l[m][p])}}else{if(!(s=r))return;a=s}if(a.id&&-1==a.id.indexOf("{")&&-1==a.id.indexOf("}")&&!e.id){let t=e[a.id]?e[a.id]:d.createUID();e.id=n+"*"+t}var y=JSON.stringify(a);if(y=y.format(e),delete(a=JSON.parse(y)).templete,c&&!a.positions&&(a.geo_point&&3==a.geo_point.length&&(a.positions=a.geo_point),a.geo_polyLine&&a.geo_polyLine.length>5&&(a.positions=a.geo_polyLine),a.geo_polygon&&a.geo_polygon.length>5&&(a.positions=a.geo_polygon)),e.nearDistance=a.nearDistance?a.nearDistance:0,e.farDistance=a.farDistance?a.farDistance:1/0,a.id){let e=a.id.split("*");e.length>1&&e[0]==n||(a.id=n+"*"+a.id)}else a.id=n+"*"+(e.id?e.id:d.createUID());let g=a.positions;for(var v in SceneGIS.defined(g)&&(g.indexOf("POINT")>-1||g.indexOf("LINESTRING")>-1||g.indexOf("POLYGON")>-1)&&(a.positions=d.wktToArray(g,a.defaultAlt)),g)0==v.indexOf("_")&&(e[v]=g[v]);return a}(e,t)}}class g{constructor(){this.events={}}add(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}raise(e,t){var n=this.events[e];if(n instanceof Array)for(let e of n)e.innerId?e.fun(t):e(t)}remove(e,t){for(var n=this.events[e],o=0;o<n.length&&n[o]!=t&&(!n[o].innerId||!t.innerId||n[o].innerId!=t.innerId);o++);n=n.splice(o,1)}removeAll(){for(var e in this.events)this.events[e]=[];this.events={}}addEvent(e,t){this.add(e,t)}raiseEvent(e,t){this.raise(e,t)}removeEvent(e,t){this.remove(e,t)}removeAllEventfunction(){this.removeAll()}}function v(e,i){if(SceneGIS.Check.typeOf.object("view",e),this._view=e,this.option=i,!n(i.id))throw new o("GisBaseLayer:option.id is required");this._features=new r,this._visible=!i||t(i.visible,!0),this._show=!0,this._children=[],this._dataReadPromise=void 0,this._owner=void 0,this._event=new g,this._featureReadyPromise=void 0,this.symbolChange=!1,this.dataChange=!1}Object.defineProperties(v.prototype,{name:{get:function(){return n(this.option)?this.option.name:void 0}},id:{get:function(){return n(this.option)?this.option.id:void 0}},visible:{get:function(){return this._visible},set:function(e){this._visible=e,this.show=e}},show:{get:function(){return this._show},set:function(e){0==this._visible&&1==e||(this._show=e)}},featureReadyPromise:{get:function(){return n(this._featureReadyPromise)?this._featureReadyPromise:void 0}},view:{get:function(){return n(this._view)?this._view:void 0}},viewer:{get:function(){return n(this._view)?this._view:void 0}},symbol:{get:function(){return n(this.option)?this.option.symbol:void 0}},alpha:{get:function(){return n(this.option)?this.option.alpha:void 0},set:function(e){o.throwInstantiationError()}},features:{get:function(){return n(this._features)?this._features:void 0}},children:{get:function(){return n(this._children)?this._children:void 0}},event:{get:function(){return n(this._event)?this._event:void 0}},owner:{get:function(){return n(this._owner)?this._owner:void 0},set:function(e){this._owner=e}}}),v.prototype.getParam=function(e){return this.option[e]},v.prototype.getData=function(){this.option.data&&(this._dataReadPromise=y.dataResolve(this.option))},v.prototype.dataCheck=function(e){return y.dataCheck(e)},v.prototype.symbolCheck=function(){return y.symbolCheck(this.option)},v.prototype.symbolResolve=function(e){return y.symbolResolve(e,this.option)},v.prototype.dataPrepare=function(e,t){return y.dataPrepare(e,t,this.option)},v.prototype.load=function(e){o.throwInstantiationError()},v.prototype.add=function(e){o.throwInstantiationError()},v.prototype.getById=function(e){o.throwInstantiationError()},v.prototype.removeById=function(e){o.throwInstantiationError()},v.prototype.zoomById=function(e){o.throwInstantiationError()},v.prototype.highLightById=function(e){o.throwInstantiationError()},v.prototype.zoomAndHLById=function(e){o.throwInstantiationError()},v.prototype.destroy=function(){};var w=Object.freeze({Height:0,Distance:1});function S(e,t){this._lodNodes=[],this._url=t.url,this._readyPromise=void 0,this._viewer=e.viewer,this._scene=e,this._type=w.Height;var n=this;this._event=new g,this._url&&(this._url instanceof String||"string"==typeof this._url)?this._readyPromise=c(this._url,{method:"get"}).then((e=>(n._lodNodes=e,n))):this._readyPromise=new Promise((e=>{n._lodNodes=this._url,e(n)}))}Object.defineProperties(S.prototype,{}),S.prototype.addLevel=function(e){this._lodNodes.push(e)},S.prototype.update=function(e){for(var t of this._lodNodes)for(var o of t.dataSet)e>t.nearDistance&&e<t.farDistance?(this._event.events.replace&&this._event.events.replace.length>0?this._event.raiseEvent("replace",{layer:o,show:!0,level:t.level}):o.show||(o.show=!0),o.features.length>0&&o.features.forEach(((e,t)=>{if(o.option.hasOwnProperty("lodLevel")&&-1!=o.option.lodLevel&&n(t._row)&&n(t._row.nearDistance)&&n(t._row)&&n(t._row.farDistance)){var r=t.distanceToCamera(o.viewer,t);r>t._row.nearDistance&&r<t._row.farDistance?t.show||(t.show=o.show):t.show&&(t.show=!1)}else t.show=o.show})),this._event.raiseEvent("change",{show:!0,level:t.level})):(this._event.events.replace&&this._event.events.replace.length>0?this._event.raiseEvent("replace",{layer:o,show:!1,level:t.level}):o.show&&(o.show=!1),o.features.length>0&&o.features.forEach(((e,t)=>{t.show&&(t.show=o.show)})),this._event.raiseEvent("change",{show:!1,level:t.level}))},S.prototype.removeLevel=function(e){this._lodNodes.splice(e,1)};const b="change",_="replace";S.prototype.addEventListener=function(e,t){if(e!==b&&e!==_)throw new o("事件类型错误,只支持change和replace事件");this._event.add(e,t)},S.prototype.removeEventListener=function(e,t){if(e!==b&&e!==_)throw new o("事件类型错误,只支持change和replace事件");this._event.remove(e,t)},S.prototype.addData=function(e,t){var n=this._lodNodes.findIndex((e=>e.level.toString()===t.toString()));n>-1&&this._lodNodes[n].dataSet.push(e)},S.prototype.removeData=function(e,t){var n=this._lodNodes.findIndex((e=>e.level.toString()===t.toString()));if(n>-1){for(var o=-1,r=0;r<this._lodNodes[n].dataSet.length;r++)if(this._lodNodes[n].dataSet[r]==e){o=r;break}o>-1&&this._lodNodes[n].dataSet.splice(o,1)}},S.prototype.destroy=function(){this._lodNodes=[]};const I={pickCenterPoint:function(e){const t=e.canvas,n=new SceneGIS.Cartesian2(t.clientWidth/2,t.clientHeight/2),o=e.camera.getPickRay(n);return e.globe.pick(o,e)||e.camera.pickEllipsoid(n)},pickOnTerrainOrEllipsoid:function(e,t){const n=e.camera.getPickRay(t);return e.globe.pick(n,e)||e.camera.pickEllipsoid(t)},calcDistanceForResolution:function(e,t,n,o){const r=n.canvas,i=n.camera.frustum.fovy;return 1*(e*r.clientHeight)*Math.cos(Math.abs(t))/2/Math.tan(i/2)},calcResolutionForDistance:function(e,t,n,o){const r=n.canvas,i=n.camera.frustum.fovy;console.assert(!isNaN(i));return 2*e*Math.tan(i/2)/1/Math.cos(Math.abs(t))/r.clientHeight}};let E=.0254000508;I.calcScaleFromResolution=function(e){return 96*e/E},I.calcResolutionFromScale=function(e){return e*E/96};const O={};O.serialize=e=>{let t=[];return Object.keys(e).forEach((n=>{t.push(`${n}=${e[n]}`)})),t.join("&")},O.getObjType=e=>{var t=Object.prototype.toString;return e instanceof Element?"element":{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[t.call(e)]},O.getViewDom=()=>window.document.getElementById("avue-view").getElementsByClassName("el-scrollbar__wrap")[0],O.deepClone=e=>{var t,n=O.getObjType(e);if("array"===n)t=[];else{if("object"!==n)return e;t={}}if("array"===n)for(var o=0,r=e.length;o<r;o++)t.push(O.deepClone(e[o]));else if("object"===n)for(var i in e)t[i]=O.deepClone(e[i]);return t},O.toggleGrayMode=e=>{document.body.className=e?document.body.className+" grayMode":document.body.className.replace(" grayMode","")},O.setTheme=e=>{document.body.className=e},O.encryption=e=>{let{data:t,type:n,param:o,key:r}=e,i=JSON.parse(JSON.stringify(t));return"Base64"==n?o.forEach((e=>{i[e]=btoa(i[e])})):"Aes"==n&&o.forEach((e=>{i[e]=window.CryptoJS.AES.encrypt(i[e],r).toString()})),i},O.fullscreenToggel=()=>{fullscreenEnable()?exitFullScreen():reqFullScreen()},O.listenfullscreen=e=>{function t(){e()}document.addEventListener("fullscreenchange",(function(){t()})),document.addEventListener("mozfullscreenchange",(function(){t()})),document.addEventListener("webkitfullscreenchange",(function(){t()})),document.addEventListener("msfullscreenchange",(function(){t()}))},O.fullscreenEnable=()=>document.isFullScreen||document.mozIsFullScreen||document.webkitIsFullScreen,O.reqFullScreen=()=>{document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.webkitRequestFullScreen?document.documentElement.webkitRequestFullScreen():document.documentElement.mozRequestFullScreen&&document.documentElement.mozRequestFullScreen()},O.exitFullScreen=()=>{document.documentElement.requestFullScreen?document.exitFullScreen():document.documentElement.webkitRequestFullScreen?document.webkitCancelFullScreen():document.documentElement.mozRequestFullScreen&&document.mozCancelFullScreen()},O.findParent=(e,t)=>{for(let n=0;n<e.length;n++)if(0!=e[n].children.length)for(let o=0;o<e[n].children.length;o++){if(e[n].children[o].id==t)return e[n];if(0!=e[n].children[o].children.length)return findParent(e[n].children[o].children,t)}},O.loadStyle=e=>{const t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e;document.getElementsByTagName("head")[0].appendChild(t)},O.diff=(e,t)=>{if(delete e.close,!(e instanceof Object)||!(t instanceof Object))return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e){var o=e[n]instanceof Object,r=t[n]instanceof Object;if(o&&r)return diff(e[n],t[n]);if(e[n]!==t[n])return!1}return!0},O.findByvalue=(e,t)=>{let n="";if(validatenull(e))return t;if("string"==typeof t||"number"==typeof t||"boolean"==typeof t){let o=0;o=findArray(e,t),n=-1!=o?e[o].label:t}else if(t instanceof Array){n=[];let o=0;t.forEach((r=>{o=findArray(e,r),-1!=o?n.push(e[o].label):n.push(t)})),n=n.toString()}return n},O.findArray=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n].value==t)return n;return-1},O.randomLenNum=(e,t)=>{let n="";return n=Math.ceil(1e14*Math.random()).toString().substr(0,e||4),t&&(n+=Date.now()),n},O.openWindow=(e,t,n,o)=>{const r=void 0!==window.screenLeft?window.screenLeft:screen.left,i=void 0!==window.screenTop?window.screenTop:screen.top,a=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-n/2+r,s=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-o/2+i,l=window.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width="+n+", height="+o+", top="+s+", left="+a);window.focus&&l.focus()},O.getTopUrl=()=>window.location.href.split("/#/")[0],O.getQueryString=e=>{let t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(decodeURI(n[2])):null},O.downloadFileBlob=(e,t)=>{const n=new XMLHttpRequest;n.open("get",e),n.responseType="blob",n.send(),n.onload=function(){if(200===this.status||304===this.status){if("msSaveOrOpenBlob"in navigator)return void navigator.msSaveOrOpenBlob(this.response,t);const e=URL.createObjectURL(this.response),n=document.createElement("a");n.style.display="none",n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(e)}}},O.downloadFileBase64=(e,t)=>{const n=new XMLHttpRequest;n.open("get",e),n.responseType="blob",n.send(),n.onload=function(){if(200===this.status||304===this.status){const e=new FileReader;e.readAsDataURL(this.response),e.onload=function(){const e=document.createElement("a");e.style.display="none",e.href=this.result,e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)}}}},O.downloadXls=(e,t)=>{let n=new Blob([e],{type:"application/vnd.ms-excel,charset=utf-8"});if(void 0!==window.chrome){var o=document.createElement("a");o.href=window.URL.createObjectURL(n),o.download=t,o.click()}else if(void 0!==window.navigator.msSaveBlob){var r=new Blob([n],{type:"application/force-download"});window.navigator.msSaveBlob(r,t)}else{var i=new File([n],t,{type:"application/force-download"});window.open(URL.createObjectURL(i))}},O.objectToGeoJson=(e,t,n,o)=>function(e,t,n){var o={type:"Feature"};return o.properties=t||{},o.geometry=e,o}({type:n,coordinates:e},t),O.arrayToGeoJson=(e,t)=>{var n,o=[];if("PolygonPg"===t.type)for(let t of e){var r=[];if(t.range){for(let e of t.range.points)r.push([e.x,e.y]);var i=objectToGeoJson([r],t,"Polygon");o.push(i)}}else for(let n of e){var a=[parseFloat(n[t.xfield]),parseFloat(n[t.yfield])];i=objectToGeoJson(a,n,"Point");o.push(i)}return(n={type:"FeatureCollection"}).features=o,n};return e.DeveloperError=o,e.Dictionary=r,e.GisBaseLayer=v,e.GisEvent=g,e.GisLod=S,e.GisLodType=w,e.IAnalysisEX=class{constructor(e,t){this._viewer=t,this.isrunning=void 0,this.callback=void 0}start(){o.throwInstantiationError()}stop(){o.throwInstantiationError()}clear(){o.throwInstantiationError()}destroy(){o.throwInstantiationError()}},e.ILayerEX=class{constructor(e,t){this._show=!1,this.featureReadyPromise=void 0,this.visible=fasle,this.features=void 0,this.name=void 0,this.id=void 0,this.viewer=void 0,this.symbol=void 0,this.alpha=1,this.children=[],this.owner=void 0,this.event=new g}get show(){return this._show}set show(e){this._show=e}load(e){throw new o("error")}add(e){throw new o("error")}getById(e){throw new o("error")}removeById(e){throw new o("error")}removeAll(){throw new o("error")}zoomById(e,t={}){throw new o("error")}highLightById(e,t={}){throw new o("error")}zoomAndHLById(e,t={}){throw new o("error")}destroy(){throw new o("error")}},e.MathEX=d,e.SceneJson=y,e.UtilEX=O,e.VERSION="1.0",e.defaultValue=t,e.defined=n,e.getAssetUrl=function(e){return a||(a=function(){const e=document.getElementsByTagName("script");for(let t=0,n=e.length;t<n;++t){const n=e[t].getAttribute("src"),o=i.exec(n);if(null!==o)return o[1]+"Assets/"}}()),a+e},e.olcsCore=I,e.string={},e.urlResolve=c,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
