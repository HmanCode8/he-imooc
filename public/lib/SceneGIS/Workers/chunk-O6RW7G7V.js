/**
 * @license
 * Cesium - https://github.com/CesiumGS/cesium
 * Version 1.114
 *
 * Copyright 2011-2022 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for full licensing details.
 */

import{a as ue}from"./chunk-755YNYN4.js";import{b as he,c as pe,d as ne}from"./chunk-5JJAXZP5.js";import{a as te}from"./chunk-PF7ABWYW.js";import{a,b as ee,c as A,d as be}from"./chunk-KXWBEOUA.js";import{a as Y}from"./chunk-4BEFMW7D.js";import{a as ae}from"./chunk-UMJEX7YU.js";import{a as V}from"./chunk-2F4MHS2T.js";import{b as E}from"./chunk-3Z2AZRQC.js";import{c as We,d as Ge,e as D}from"./chunk-A5XXOFX2.js";var Ze=We((st,de)=>{"use strict";de.exports=xe;de.exports.default=xe;function xe(e,n,t){t=t||2;var o=n&&n.length,i=o?n[0]*t:e.length,u=Oe(e,0,i,t,!0),r=[];if(!u||u.next===u.prev)return r;var s,c,f,l,h,v,S;if(o&&(u=ke(e,n,u,t)),e.length>80*t){s=f=e[0],c=l=e[1];for(var p=t;p<i;p+=t)h=e[p],v=e[p+1],h<s&&(s=h),v<c&&(c=v),h>f&&(f=h),v>l&&(l=v);S=Math.max(f-s,l-c),S=S!==0?32767/S:0}return re(u,r,t,s,c,S,0),r}function Oe(e,n,t,o,i){var u,r;if(i===ge(e,n,t,o)>0)for(u=n;u<t;u+=o)r=Ee(u,e[u],e[u+1],r);else for(u=t-o;u>=n;u-=o)r=Ee(u,e[u],e[u+1],r);return r&&le(r,r.next)&&(oe(r),r=r.next),r}function k(e,n){if(!e)return e;n||(n=e);var t=e,o;do if(o=!1,!t.steiner&&(le(t,t.next)||C(t.prev,t,t.next)===0)){if(oe(t),t=n=t.prev,t===t.next)break;o=!0}else t=t.next;while(o||t!==n);return n}function re(e,n,t,o,i,u,r){if(e){!r&&u&&qe(e,o,i,u);for(var s=e,c,f;e.prev!==e.next;){if(c=e.prev,f=e.next,u?Ie(e,o,i,u):$e(e)){n.push(c.i/t|0),n.push(e.i/t|0),n.push(f.i/t|0),oe(e),e=f.next,s=f.next;continue}if(e=f,e===s){r?r===1?(e=He(k(e),n,t),re(e,n,t,o,i,u,2)):r===2&&Ne(e,n,t,o,i,u):re(k(e),n,t,o,i,u,1);break}}}}function $e(e){var n=e.prev,t=e,o=e.next;if(C(n,t,o)>=0)return!1;for(var i=n.x,u=t.x,r=o.x,s=n.y,c=t.y,f=o.y,l=i<u?i<r?i:r:u<r?u:r,h=s<c?s<f?s:f:c<f?c:f,v=i>u?i>r?i:r:u>r?u:r,S=s>c?s>f?s:f:c>f?c:f,p=o.next;p!==n;){if(p.x>=l&&p.x<=v&&p.y>=h&&p.y<=S&&q(i,s,u,c,r,f,p.x,p.y)&&C(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Ie(e,n,t,o){var i=e.prev,u=e,r=e.next;if(C(i,u,r)>=0)return!1;for(var s=i.x,c=u.x,f=r.x,l=i.y,h=u.y,v=r.y,S=s<c?s<f?s:f:c<f?c:f,p=l<h?l<v?l:v:h<v?h:v,T=s>c?s>f?s:f:c>f?c:f,Z=l>h?l>v?l:v:h>v?h:v,F=ye(S,p,n,t,o),B=ye(T,Z,n,t,o),y=e.prevZ,x=e.nextZ;y&&y.z>=F&&x&&x.z<=B;){if(y.x>=S&&y.x<=T&&y.y>=p&&y.y<=Z&&y!==i&&y!==r&&q(s,l,c,h,f,v,y.x,y.y)&&C(y.prev,y,y.next)>=0||(y=y.prevZ,x.x>=S&&x.x<=T&&x.y>=p&&x.y<=Z&&x!==i&&x!==r&&q(s,l,c,h,f,v,x.x,x.y)&&C(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;y&&y.z>=F;){if(y.x>=S&&y.x<=T&&y.y>=p&&y.y<=Z&&y!==i&&y!==r&&q(s,l,c,h,f,v,y.x,y.y)&&C(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;x&&x.z<=B;){if(x.x>=S&&x.x<=T&&x.y>=p&&x.y<=Z&&x!==i&&x!==r&&q(s,l,c,h,f,v,x.x,x.y)&&C(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function He(e,n,t){var o=e;do{var i=o.prev,u=o.next.next;!le(i,u)&&Te(i,o,o.next,u)&&ie(i,u)&&ie(u,i)&&(n.push(i.i/t|0),n.push(o.i/t|0),n.push(u.i/t|0),oe(o),oe(o.next),o=e=u),o=o.next}while(o!==e);return k(o)}function Ne(e,n,t,o,i,u){var r=e;do{for(var s=r.next.next;s!==r.prev;){if(r.i!==s.i&&je(r,s)){var c=Me(r,s);r=k(r,r.next),c=k(c,c.next),re(r,n,t,o,i,u,0),re(c,n,t,o,i,u,0);return}s=s.next}r=r.next}while(r!==e)}function ke(e,n,t,o){var i=[],u,r,s,c,f;for(u=0,r=n.length;u<r;u++)s=n[u]*o,c=u<r-1?n[u+1]*o:e.length,f=Oe(e,s,c,o,!1),f===f.next&&(f.steiner=!0),i.push(Qe(f));for(i.sort(Ue),u=0;u<i.length;u++)t=_e(i[u],t);return t}function Ue(e,n){return e.x-n.x}function _e(e,n){var t=Ke(e,n);if(!t)return n;var o=Me(t,e);return k(o,o.next),k(t,t.next)}function Ke(e,n){var t=n,o=e.x,i=e.y,u=-1/0,r;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var s=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(s<=o&&s>u&&(u=s,r=t.x<t.next.x?t:t.next,s===o))return r}t=t.next}while(t!==n);if(!r)return null;var c=r,f=r.x,l=r.y,h=1/0,v;t=r;do o>=t.x&&t.x>=f&&o!==t.x&&q(i<l?o:u,i,f,l,i<l?u:o,i,t.x,t.y)&&(v=Math.abs(i-t.y)/(o-t.x),ie(t,e)&&(v<h||v===h&&(t.x>r.x||t.x===r.x&&Ve(r,t)))&&(r=t,h=v)),t=t.next;while(t!==c);return r}function Ve(e,n){return C(e.prev,e,n.prev)<0&&C(n.next,e,e.next)<0}function qe(e,n,t,o){var i=e;do i.z===0&&(i.z=ye(i.x,i.y,n,t,o)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Je(i)}function Je(e){var n,t,o,i,u,r,s,c,f=1;do{for(t=e,e=null,u=null,r=0;t;){for(r++,o=t,s=0,n=0;n<f&&(s++,o=o.nextZ,!!o);n++);for(c=f;s>0||c>0&&o;)s!==0&&(c===0||!o||t.z<=o.z)?(i=t,t=t.nextZ,s--):(i=o,o=o.nextZ,c--),u?u.nextZ=i:e=i,i.prevZ=u,u=i;t=o}u.nextZ=null,f*=2}while(r>1);return e}function ye(e,n,t,o,i){return e=(e-t)*i|0,n=(n-o)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e|n<<1}function Qe(e){var n=e,t=e;do(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next;while(n!==e);return t}function q(e,n,t,o,i,u,r,s){return(i-r)*(n-s)>=(e-r)*(u-s)&&(e-r)*(o-s)>=(t-r)*(n-s)&&(t-r)*(u-s)>=(i-r)*(o-s)}function je(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!Xe(e,n)&&(ie(e,n)&&ie(n,e)&&Ye(e,n)&&(C(e.prev,e,n.prev)||C(e,n.prev,n))||le(e,n)&&C(e.prev,e,e.next)>0&&C(n.prev,n,n.next)>0)}function C(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function le(e,n){return e.x===n.x&&e.y===n.y}function Te(e,n,t,o){var i=fe(C(e,n,t)),u=fe(C(e,n,o)),r=fe(C(t,o,e)),s=fe(C(t,o,n));return!!(i!==u&&r!==s||i===0&&ce(e,t,n)||u===0&&ce(e,o,n)||r===0&&ce(t,e,o)||s===0&&ce(t,n,o))}function ce(e,n,t){return n.x<=Math.max(e.x,t.x)&&n.x>=Math.min(e.x,t.x)&&n.y<=Math.max(e.y,t.y)&&n.y>=Math.min(e.y,t.y)}function fe(e){return e>0?1:e<0?-1:0}function Xe(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&Te(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function ie(e,n){return C(e.prev,e,e.next)<0?C(e,n,e.next)>=0&&C(e,e.prev,n)>=0:C(e,n,e.prev)<0||C(e,e.next,n)<0}function Ye(e,n){var t=e,o=!1,i=(e.x+n.x)/2,u=(e.y+n.y)/2;do t.y>u!=t.next.y>u&&t.next.y!==t.y&&i<(t.next.x-t.x)*(u-t.y)/(t.next.y-t.y)+t.x&&(o=!o),t=t.next;while(t!==e);return o}function Me(e,n){var t=new me(e.i,e.x,e.y),o=new me(n.i,n.x,n.y),i=e.next,u=n.prev;return e.next=n,n.prev=e,t.next=i,i.prev=t,o.next=t,t.prev=o,u.next=o,o.prev=u,o}function Ee(e,n,t,o){var i=new me(e,n,t);return o?(i.next=o.next,i.prev=o,o.next.prev=i,o.next=i):(i.prev=i,i.next=i),i}function oe(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function me(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}xe.deviation=function(e,n,t,o){var i=n&&n.length,u=i?n[0]*t:e.length,r=Math.abs(ge(e,0,u,t));if(i)for(var s=0,c=n.length;s<c;s++){var f=n[s]*t,l=s<c-1?n[s+1]*t:e.length;r-=Math.abs(ge(e,f,l,t))}var h=0;for(s=0;s<o.length;s+=3){var v=o[s]*t,S=o[s+1]*t,p=o[s+2]*t;h+=Math.abs((e[v]-e[p])*(e[S+1]-e[v+1])-(e[v]-e[S])*(e[p+1]-e[v+1]))}return r===0&&h===0?0:Math.abs((h-r)/r)};function ge(e,n,t,o){for(var i=0,u=n,r=t-o;u<t;u+=o)i+=(e[r]-e[u])*(e[u+1]+e[r+1]),r=u;return i}xe.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},o=0,i=0;i<e.length;i++){for(var u=0;u<e[i].length;u++)for(var r=0;r<n;r++)t.vertices.push(e[i][u][r]);i>0&&(o+=e[i-1].length,t.holes.push(o))}return t}});var se={CLOCKWISE:ae.CW,COUNTER_CLOCKWISE:ae.CCW};se.validate=function(e){return e===se.CLOCKWISE||e===se.COUNTER_CLOCKWISE};var ve=Object.freeze(se);var Le=Ge(Ze(),1);var et=new a,tt=new a,G={};G.computeArea2D=function(e){E.defined("positions",e),E.typeOf.number.greaterThanOrEquals("positions.length",e.length,3);let n=e.length,t=0;for(let o=n-1,i=0;i<n;o=i++){let u=e[o],r=e[i];t+=u.x*r.y-r.x*u.y}return t*.5};G.computeWindingOrder2D=function(e){return G.computeArea2D(e)>0?ve.COUNTER_CLOCKWISE:ve.CLOCKWISE};G.triangulate=function(e,n){E.defined("positions",e);let t=A.packArray(e);return(0,Le.default)(t,n,2)};var De=new a,Fe=new a,ze=new a,we=new a,Se=new a,Ae=new a,R=new a,Pe=new A,Re=new A,Be=new A,J=new A;G.computeSubdivision=function(e,n,t,o,i,u){i=V(i,Y.RADIANS_PER_DEGREE);let r=D(o);E.typeOf.object("ellipsoid",e),E.defined("positions",n),E.defined("indices",t),E.typeOf.number.greaterThanOrEquals("indices.length",t.length,3),E.typeOf.number.equals("indices.length % 3","0",t.length%3,0),E.typeOf.number.greaterThan("granularity",i,0);let s=t.slice(0),c,f=n.length,l=new Array(f*3),h=new Array(f*2),v=0,S=0;for(c=0;c<f;c++){let x=n[c];if(l[v++]=x.x,l[v++]=x.y,l[v++]=x.z,r){let m=o[c];h[S++]=m.x,h[S++]=m.y}}let p=[],T={},Z=e.maximumRadius,F=Y.chordLength(i,Z),B=F*F;for(;s.length>0;){let x=s.pop(),m=s.pop(),d=s.pop(),b=a.fromArray(l,d*3,De),U=a.fromArray(l,m*3,Fe),_=a.fromArray(l,x*3,ze),Q,$,I;r&&(Q=A.fromArray(h,d*2,Pe),$=A.fromArray(h,m*2,Re),I=A.fromArray(h,x*2,Be));let W,z,P;u===!0?(W=b.clone(we),z=U.clone(Se),P=_.clone(Ae)):(W=a.multiplyByScalar(a.normalize(b,we),Z,we),z=a.multiplyByScalar(a.normalize(U,Se),Z,Se),P=a.multiplyByScalar(a.normalize(_,Ae),Z,Ae));let H=a.magnitudeSquared(a.subtract(W,z,R)),j=a.magnitudeSquared(a.subtract(z,P,R)),X=a.magnitudeSquared(a.subtract(P,W,R)),N=Math.max(H,j,X),M,g,w;N>B?H===N?(M=`${Math.min(d,m)} ${Math.max(d,m)}`,c=T[M],D(c)||(g=a.add(b,U,R),a.multiplyByScalar(g,.5,g),l.push(g.x,g.y,g.z),c=l.length/3-1,T[M]=c,r&&(w=A.add(Q,$,J),A.multiplyByScalar(w,.5,w),h.push(w.x,w.y))),s.push(d,c,x),s.push(c,m,x)):j===N?(M=`${Math.min(m,x)} ${Math.max(m,x)}`,c=T[M],D(c)||(g=a.add(U,_,R),a.multiplyByScalar(g,.5,g),l.push(g.x,g.y,g.z),c=l.length/3-1,T[M]=c,r&&(w=A.add($,I,J),A.multiplyByScalar(w,.5,w),h.push(w.x,w.y))),s.push(m,c,d),s.push(c,x,d)):X===N&&(M=`${Math.min(x,d)} ${Math.max(x,d)}`,c=T[M],D(c)||(g=a.add(_,b,R),a.multiplyByScalar(g,.5,g),l.push(g.x,g.y,g.z),c=l.length/3-1,T[M]=c,r&&(w=A.add(I,Q,J),A.multiplyByScalar(w,.5,w),h.push(w.x,w.y))),s.push(x,c,m),s.push(c,d,m)):(p.push(d),p.push(m),p.push(x))}let y={attributes:{position:new ne({componentDatatype:te.DOUBLE,componentsPerAttribute:3,values:l})},indices:p,primitiveType:he.TRIANGLES};return r&&(y.attributes.st=new ne({componentDatatype:te.FLOAT,componentsPerAttribute:2,values:h})),new pe(y)};var nt=new ee,rt=new ee,it=new ee,Ce=new ee;G.computeRhumbLineSubdivision=function(e,n,t,o,i){i=V(i,Y.RADIANS_PER_DEGREE);let u=D(o);E.typeOf.object("ellipsoid",e),E.defined("positions",n),E.defined("indices",t),E.typeOf.number.greaterThanOrEquals("indices.length",t.length,3),E.typeOf.number.equals("indices.length % 3","0",t.length%3,0),E.typeOf.number.greaterThan("granularity",i,0);let r=t.slice(0),s,c=n.length,f=new Array(c*3),l=new Array(c*2),h=0,v=0;for(s=0;s<c;s++){let m=n[s];if(f[h++]=m.x,f[h++]=m.y,f[h++]=m.z,u){let d=o[s];l[v++]=d.x,l[v++]=d.y}}let S=[],p={},T=e.maximumRadius,Z=Y.chordLength(i,T),F=new ue(void 0,void 0,e),B=new ue(void 0,void 0,e),y=new ue(void 0,void 0,e);for(;r.length>0;){let m=r.pop(),d=r.pop(),b=r.pop(),U=a.fromArray(f,b*3,De),_=a.fromArray(f,d*3,Fe),Q=a.fromArray(f,m*3,ze),$,I,W;u&&($=A.fromArray(l,b*2,Pe),I=A.fromArray(l,d*2,Re),W=A.fromArray(l,m*2,Be));let z=e.cartesianToCartographic(U,nt),P=e.cartesianToCartographic(_,rt),H=e.cartesianToCartographic(Q,it);F.setEndPoints(z,P);let j=F.surfaceDistance;B.setEndPoints(P,H);let X=B.surfaceDistance;y.setEndPoints(H,z);let N=y.surfaceDistance,M=Math.max(j,X,N),g,w,K,L,O;M>Z?j===M?(g=`${Math.min(b,d)} ${Math.max(b,d)}`,s=p[g],D(s)||(w=F.interpolateUsingFraction(.5,Ce),K=(z.height+P.height)*.5,L=a.fromRadians(w.longitude,w.latitude,K,e,R),f.push(L.x,L.y,L.z),s=f.length/3-1,p[g]=s,u&&(O=A.add($,I,J),A.multiplyByScalar(O,.5,O),l.push(O.x,O.y))),r.push(b,s,m),r.push(s,d,m)):X===M?(g=`${Math.min(d,m)} ${Math.max(d,m)}`,s=p[g],D(s)||(w=B.interpolateUsingFraction(.5,Ce),K=(P.height+H.height)*.5,L=a.fromRadians(w.longitude,w.latitude,K,e,R),f.push(L.x,L.y,L.z),s=f.length/3-1,p[g]=s,u&&(O=A.add(I,W,J),A.multiplyByScalar(O,.5,O),l.push(O.x,O.y))),r.push(d,s,b),r.push(s,m,b)):N===M&&(g=`${Math.min(m,b)} ${Math.max(m,b)}`,s=p[g],D(s)||(w=y.interpolateUsingFraction(.5,Ce),K=(H.height+z.height)*.5,L=a.fromRadians(w.longitude,w.latitude,K,e,R),f.push(L.x,L.y,L.z),s=f.length/3-1,p[g]=s,u&&(O=A.add(W,$,J),A.multiplyByScalar(O,.5,O),l.push(O.x,O.y))),r.push(m,s,d),r.push(s,b,d)):(S.push(b),S.push(d),S.push(m))}let x={attributes:{position:new ne({componentDatatype:te.DOUBLE,componentsPerAttribute:3,values:f})},indices:S,primitiveType:he.TRIANGLES};return u&&(x.attributes.st=new ne({componentDatatype:te.FLOAT,componentsPerAttribute:2,values:l})),new pe(x)};G.scaleToGeodeticHeight=function(e,n,t,o,i){t=V(t,be.WGS84);let u=et,r=tt;if(n=V(n,0),o=V(o,!0),D(e)){let s=e.length;for(let c=0;c<s;c+=3)a.fromArray(e,c,r),o&&(!D(i)||i===!1?r=t.scaleToGeodeticSurface(r,r):r.z=0),n!==0&&(!D(i)||i===!1?u=t.geodeticSurfaceNormal(r,u):u=new a(0,0,1),a.multiplyByScalar(u,n,u),a.add(r,u,r)),e[c]=r.x,e[c+1]=r.y,e[c+2]=r.z}return e};var At=G;export{ve as a,At as b};
