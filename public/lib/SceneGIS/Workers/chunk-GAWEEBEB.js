/**
 * @license
 * Cesium - https://github.com/CesiumGS/cesium
 * Version 1.114
 *
 * Copyright 2011-2022 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for full licensing details.
 */

import{a as W}from"./chunk-24FSEFXQ.js";import{a as re}from"./chunk-CTJWM7OW.js";import{f as k,i as ue}from"./chunk-XIY2HUS2.js";import{a as fe,b as j}from"./chunk-CJEZWAOI.js";import{a as e,b as ie,c as te,e as O}from"./chunk-KXWBEOUA.js";import{a as _}from"./chunk-4BEFMW7D.js";import{a as Z}from"./chunk-2F4MHS2T.js";import{a as se}from"./chunk-3Z2AZRQC.js";import{e as ee}from"./chunk-A5XXOFX2.js";var Se={ROUNDED:0,MITERED:1,BEVELED:2},G=Object.freeze(Se);var me={};function q(r,n){if(!ee(r))throw new se("identifier is required.");ee(me[r])||(me[r]=!0,console.warn(Z(n,r)))}q.geometryOutlines="Entity geometry outlines are unsupported on terrain. Outlines will be disabled. To enable outlines, disable geometry terrain clamping by explicitly setting height to 0.";q.geometryZIndex="Entity geometry with zIndex are unsupported when height or extrudedHeight are defined.  zIndex will be ignored";q.geometryHeightReference="Entity corridor, ellipse, polygon or rectangle with heightReference must also have a defined height.  heightReference will be ignored";q.geometryExtrudedHeightReference="Entity corridor, ellipse, polygon or rectangle with extrudedHeightReference must also have a defined extrudedHeight.  extrudedHeightReference will be ignored";var he=q;var w=[new e,new e],Te=new e,ze=new e,Be=new e,Ce=new e,Ae=new e,be=new e,Oe=new e,ve=new e,De=new e,I=new e,X=new e,R={},ne=new ie;function je(r,n){let l=new Array(r.length);for(let o=0;o<r.length;o++){let t=r[o];ne=n.cartesianToCartographic(t,ne),l[o]=ne.height,r[o]=n.scaleToGeodeticSurface(t,t)}return l}function oe(r,n,l,o){let t=r[0],c=r[1],u=e.angleBetween(t,c),a=Math.ceil(u/o),s=new Array(a),i;if(n===l){for(i=0;i<a;i++)s[i]=n;return s.push(l),s}let d=(l-n)/a;for(i=1;i<a;i++){let x=n+i*d;s[i]=x}return s[0]=n,s.push(l),s}var Y=new e,J=new e;function He(r,n,l,o){let t=new re(l,o),c=t.projectPointOntoPlane(e.add(l,r,Y),Y),u=t.projectPointOntoPlane(e.add(l,n,J),J),a=te.angleBetween(c,u);return u.x*c.y-u.y*c.x>=0?-a:a}var Me=new e(-1,0,0),H=new j,Ne=new j,ce=new O,Ve=O.IDENTITY.clone(),Fe=new e,Ge=new fe,de=new e;function v(r,n,l,o,t,c,u,a){let s=Fe,i=Ge;H=ue.eastNorthUpToFixedFrame(r,t,H),s=j.multiplyByPointAsVector(H,Me,s),s=e.normalize(s,s);let S=He(s,n,r,t);ce=O.fromRotationZ(S,ce),de.z=c,H=j.multiplyTransformation(H,j.fromRotationTranslation(ce,de,Ne),H);let d=Ve;d[0]=u;for(let x=0;x<a;x++)for(let f=0;f<l.length;f+=3)i=e.fromArray(l,f,i),i=O.multiplyByVector(d,i,i),i=j.multiplyByPoint(H,i,i),o.push(i.x,i.y,i.z);return o}var Ie=new e;function ae(r,n,l,o,t,c,u){for(let a=0;a<r.length;a+=3){let s=e.fromArray(r,a,Ie);o=v(s,n,l,o,t,c[a/3],u,1)}return o}function Le(r,n){let l=r.length,o=new Array(l*6),t=0,c=n.x+n.width/2,u=n.y+n.height/2,a=r[0];o[t++]=a.x-c,o[t++]=0,o[t++]=a.y-u;for(let s=1;s<l;s++){a=r[s];let i=a.x-c,S=a.y-u;o[t++]=i,o[t++]=0,o[t++]=S,o[t++]=i,o[t++]=0,o[t++]=S}return a=r[0],o[t++]=a.x-c,o[t++]=0,o[t++]=a.y-u,o}function ge(r,n){let l=r.length,o=new Array(l*3),t=0,c=n.x+n.width/2,u=n.y+n.height/2;for(let a=0;a<l;a++)o[t++]=r[a].x-c,o[t++]=0,o[t++]=r[a].y-u;return o}var ye=new k,we=new e,pe=new O;function xe(r,n,l,o,t,c,u,a,s,i){let S=e.angleBetween(e.subtract(n,r,I),e.subtract(l,r,X)),d=o===G.BEVELED?0:Math.ceil(S/_.toRadians(5)),x;t?x=O.fromQuaternion(k.fromAxisAngle(e.negate(r,I),S/(d+1),ye),pe):x=O.fromQuaternion(k.fromAxisAngle(r,S/(d+1),ye),pe);let f,g;if(n=e.clone(n,we),d>0){let D=i?2:1;for(let y=0;y<d;y++)n=O.multiplyByVector(x,n,n),f=e.subtract(n,r,I),f=e.normalize(f,f),t||(f=e.negate(f,f)),g=c.scaleToGeodeticSurface(n,X),u=v(g,f,a,u,c,s,1,D)}else f=e.subtract(n,r,I),f=e.normalize(f,f),t||(f=e.negate(f,f)),g=c.scaleToGeodeticSurface(n,X),u=v(g,f,a,u,c,s,1,1),l=e.clone(l,we),f=e.subtract(l,r,I),f=e.normalize(f,f),t||(f=e.negate(f,f)),g=c.scaleToGeodeticSurface(l,X),u=v(g,f,a,u,c,s,1,1);return u}R.removeDuplicatesFromShape=function(r){let n=r.length,l=[];for(let o=n-1,t=0;t<n;o=t++){let c=r[o],u=r[t];te.equals(c,u)||l.push(u)}return l};R.angleIsGreaterThanPi=function(r,n,l,o,t){if(t=Z(t,!1),t===!0){let s=new e;if(e.cross(r,n,s),s.z>=0)return!1;if(s.z<0)return!0}let c=new re(l,o),u=c.projectPointOntoPlane(e.add(l,r,Y),Y),a=c.projectPointOntoPlane(e.add(l,n,J),J);return a.x*u.y-a.y*u.x>=0};var Pe=new e,qe=new e;R.computePositions=function(r,n,l,o,t){let c=o._ellipsoid,u=je(r,c),a=o._granularity,s=o._cornerType,i=t?Le(n,l):ge(n,l),S=t?ge(n,l):void 0,d=l.height/2,x=l.width/2,f=r.length,g=[],D=t?[]:void 0,y=Te,b=ze,h=Be,E=Ce,z=Ae,B=be,C=Oe,m=ve,T=De,p=r[0],M=r[1];E=c.geodeticSurfaceNormal(p,E),y=e.subtract(M,p,y),y=e.normalize(y,y),m=e.cross(E,y,m),m=e.normalize(m,m);let N=u[0],A=u[1];t&&(D=v(p,m,S,D,c,N+d,1,1)),T=e.clone(p,T),p=M,b=e.negate(y,b);let V,F;for(let U=1;U<f-1;U++){let le=t?2:1;if(M=r[U+1],p.equals(M)){he("Positions are too close and are considered equivalent with rounding error.");continue}y=e.subtract(M,p,y),y=e.normalize(y,y),h=e.add(y,b,h),h=e.normalize(h,h),E=c.geodeticSurfaceNormal(p,E);let L=e.multiplyByScalar(E,e.dot(y,E),Pe);e.subtract(y,L,L),e.normalize(L,L);let P=e.multiplyByScalar(E,e.dot(b,E),qe);if(e.subtract(b,P,P),e.normalize(P,P),!_.equalsEpsilon(Math.abs(e.dot(L,P)),1,_.EPSILON7)){h=e.cross(h,E,h),h=e.cross(E,h,h),h=e.normalize(h,h);let Q=1/Math.max(.25,e.magnitude(e.cross(h,b,I))),$=R.angleIsGreaterThanPi(y,b,p,c);$?(z=e.add(p,e.multiplyByScalar(h,Q*x,h),z),B=e.add(z,e.multiplyByScalar(m,x,B),B),w[0]=e.clone(T,w[0]),w[1]=e.clone(B,w[1]),V=oe(w,N+d,A+d,a),F=W.generateArc({positions:w,granularity:a,ellipsoid:c}),g=ae(F,m,i,g,c,V,1),m=e.cross(E,y,m),m=e.normalize(m,m),C=e.add(z,e.multiplyByScalar(m,x,C),C),s===G.ROUNDED||s===G.BEVELED?xe(z,B,C,s,$,c,g,i,A+d,t):(h=e.negate(h,h),g=v(p,h,i,g,c,A+d,Q,le)),T=e.clone(C,T)):(z=e.add(p,e.multiplyByScalar(h,Q*x,h),z),B=e.add(z,e.multiplyByScalar(m,-x,B),B),w[0]=e.clone(T,w[0]),w[1]=e.clone(B,w[1]),V=oe(w,N+d,A+d,a),F=W.generateArc({positions:w,granularity:a,ellipsoid:c}),g=ae(F,m,i,g,c,V,1),m=e.cross(E,y,m),m=e.normalize(m,m),C=e.add(z,e.multiplyByScalar(m,-x,C),C),s===G.ROUNDED||s===G.BEVELED?xe(z,B,C,s,$,c,g,i,A+d,t):g=v(p,h,i,g,c,A+d,Q,le),T=e.clone(C,T)),b=e.negate(y,b)}else g=v(T,m,i,g,c,N+d,1,1),T=p;N=A,A=u[U+1],p=M}w[0]=e.clone(T,w[0]),w[1]=e.clone(p,w[1]),V=oe(w,N+d,A+d,a),F=W.generateArc({positions:w,granularity:a,ellipsoid:c}),g=ae(F,m,i,g,c,V,1),t&&(D=v(p,m,S,D,c,A+d,1,1)),f=g.length;let Ee=t?f+D.length:f,K=new Float64Array(Ee);return K.set(g),t&&K.set(D,f),K};var st=R;export{G as a,he as b,st as c};
